<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>ntuple - Ruby/GSL (v1.16.0.3)</title>

<link href="./fonts.css" rel="stylesheet">
<link href="./rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script src="./js/jquery.js"></script>
<script src="./js/navigation.js"></script>
<script src="./js/search_index.js"></script>
<script src="./js/search.js"></script>
<script src="./js/searcher.js"></script>
<script src="./js/darkfish.js"></script>


<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#label-N-tuples">N-tuples</a>
    <li><a href="#label-The+Ntuple+class">The <code>Ntuple</code> class</a>
    <li><a href="#label-Writing+and+reading+ntuples">Writing and reading ntuples</a>
    <li><a href="#label-Histogramming+ntuple+values">Histogramming ntuple values</a>
  </ul>
</div>


  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="./alf_rdoc.html">alf</a>
  
    <li><a href="./blas_rdoc.html">blas</a>
  
    <li><a href="./bspline_rdoc.html">bspline</a>
  
    <li><a href="./changes_rdoc.html">changes</a>
  
    <li><a href="./cheb_rdoc.html">cheb</a>
  
    <li><a href="./cholesky_complex_rdoc.html">cholesky_complex</a>
  
    <li><a href="./combi_rdoc.html">combi</a>
  
    <li><a href="./complex_rdoc.html">complex</a>
  
    <li><a href="./const_rdoc.html">const</a>
  
    <li><a href="./dht_rdoc.html">dht</a>
  
    <li><a href="./diff_rdoc.html">diff</a>
  
    <li><a href="./ehandling_rdoc.html">ehandling</a>
  
    <li><a href="./eigen_rdoc.html">eigen</a>
  
    <li><a href="./fft_rdoc.html">fft</a>
  
    <li><a href="./fit_rdoc.html">fit</a>
  
    <li><a href="./function_rdoc.html">function</a>
  
    <li><a href="./graph_rdoc.html">graph</a>
  
    <li><a href="./hist_rdoc.html">hist</a>
  
    <li><a href="./hist2d_rdoc.html">hist2d</a>
  
    <li><a href="./hist3d_rdoc.html">hist3d</a>
  
    <li><a href="./index_rdoc.html">index</a>
  
    <li><a href="./integration_rdoc.html">integration</a>
  
    <li><a href="./interp_rdoc.html">interp</a>
  
    <li><a href="./intro_rdoc.html">intro</a>
  
    <li><a href="./linalg_rdoc.html">linalg</a>
  
    <li><a href="./linalg_complex_rdoc.html">linalg_complex</a>
  
    <li><a href="./math_rdoc.html">math</a>
  
    <li><a href="./matrix_rdoc.html">matrix</a>
  
    <li><a href="./min_rdoc.html">min</a>
  
    <li><a href="./monte_rdoc.html">monte</a>
  
    <li><a href="./multimin_rdoc.html">multimin</a>
  
    <li><a href="./multiroot_rdoc.html">multiroot</a>
  
    <li><a href="./narray_rdoc.html">narray</a>
  
    <li><a href="./ndlinear_rdoc.html">ndlinear</a>
  
    <li><a href="./nonlinearfit_rdoc.html">nonlinearfit</a>
  
    <li><a href="./ntuple_rdoc.html">ntuple</a>
  
    <li><a href="./odeiv_rdoc.html">odeiv</a>
  
    <li><a href="./perm_rdoc.html">perm</a>
  
    <li><a href="./poly_rdoc.html">poly</a>
  
    <li><a href="./qrng_rdoc.html">qrng</a>
  
    <li><a href="./randist_rdoc.html">randist</a>
  
    <li><a href="./ref_rdoc.html">ref</a>
  
    <li><a href="./rng_rdoc.html">rng</a>
  
    <li><a href="./roots_rdoc.html">roots</a>
  
    <li><a href="./sf_rdoc.html">sf</a>
  
    <li><a href="./siman_rdoc.html">siman</a>
  
    <li><a href="./sort_rdoc.html">sort</a>
  
    <li><a href="./start_rdoc.html">start</a>
  
    <li><a href="./stats_rdoc.html">stats</a>
  
    <li><a href="./sum_rdoc.html">sum</a>
  
    <li><a href="./tensor_rdoc.html">tensor</a>
  
    <li><a href="./tut_rdoc.html">tut</a>
  
    <li><a href="./use_rdoc.html">use</a>
  
    <li><a href="./vector_rdoc.html">vector</a>
  
    <li><a href="./vector_complex_rdoc.html">vector_complex</a>
  
    <li><a href="./wavelet_rdoc.html">wavelet</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page ntuple.rdoc">

<h1 id="label-N-tuples">N-tuples<span><a href="#label-N-tuples">&para;</a> <a href="#documentation">&uarr;</a></span></h1>

<p>This chapter describes functions for creating and manipulating ntuples,
sets of values associated with events. The ntuples are stored in files.
Their values can be extracted in any combination and booked in a histogram
using a selection function.</p>

<p>The values to be stored are held in a <a
href="vector_rdoc.html">GSL::Vector</a> or a <a
href="matrix_rdoc.html">GSL::Matrix</a> object, and an ntuple is created
associating this object with a file. The values are then written to the
file (normally inside a loop) using the ntuple functions described below.</p>

<p>A histogram can be created from ntuple data by providing a selection
function and a value function. The selection function specifies whether an
event should be included in the subset to be analyzed or not. The value
function computes the entry to be added to the histogram for each event.</p>

<h2 id="label-The+Ntuple+class">The <code>Ntuple</code> class<span><a href="#label-The+Ntuple+class">&para;</a> <a href="#documentation">&uarr;</a></span></h2>
<hr>
<ul><li>
<p>GSL::Ntuple.create(filename, v)</p>
</li><li>
<p>GSL::Ntuple.alloc(filename, v)</p>

<p>These create a new write-only ntuple file <code>filename</code> for
ntuples.</p>
</li></ul>

<p>Any existing file with the same name is truncated to zero length and
overwritten. A preexisting <code>Vector</code> object <code>v</code> for
the current ntuple data must be supplied: this is used to copy ntuples in
and out of the file.</p>
<hr>
<ul><li>
<p>GSL::Ntuple.open(filename, v)</p>

<p>This opens an existing ntuple file <code>filename</code> for reading. A
preexisting</p>
</li></ul>

<p><code>Vector</code> object <code>v</code> for the current ntuple data must
be supplied.</p>

<h2 id="label-Writing+and+reading+ntuples">Writing and reading ntuples<span><a href="#label-Writing+and+reading+ntuples">&para;</a> <a href="#documentation">&uarr;</a></span></h2>
<hr>
<ul><li>
<p>GSL::Ntuple#write</p>
</li><li>
<p>GSL::Ntuple#bookdata</p>

<p>This method writes the current ntuple data to the corresponding file.</p>
</li></ul>
<hr>
<ul><li>
<p>GSL::Ntuple#read</p>

<p>This method reads the current row of the ntuple file.</p>
</li></ul>

<h2 id="label-Histogramming+ntuple+values">Histogramming ntuple values<span><a href="#label-Histogramming+ntuple+values">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>Once an ntuple has been created its contents can be histogrammed in various
ways using the function gsl_ntuple_project. Two user-defined functions must
be provided, a function to select events and a function to compute scalar
values. The selection function and the value function both accept the
ntuple row as a first argument and other parameters as a second argument.</p>
<hr>
<ul><li>
<p>GSL::Ntuple::SelectFn.alloc {block}</p>
</li><li>
<p>GSL::Ntuple::SelectFn.alloc(proc)</p>
</li><li>
<p>GSL::Ntuple::ValueFn.alloc {block}</p>
</li><li>
<p>GSL::Ntuple::ValueFn.alloc(proc)</p>

<p>Constructors for selection functions and value functions. The selection
function shoud return a non-zero value for each ntuple row that is to be
included in the histogram. The value function should return the value to be
added to the histogram for the ntuple row.</p>
</li></ul>
<hr>
<ul><li>
<p>GSL::Ntuple::SelectFn#set_params(params)</p>
</li><li>
<p>GSL::Ntuple::ValueFn#set_params(params)</p>

<p>Set the parameters of the functions, by an array <code>params</code>.</p>
</li></ul>
<hr>
<ul><li>
<p>GSL::Ntuple.project(h, n, valfn, selfn)</p>

<p>These methods updates the histogram <code>h</code> from the ntuple
<code>n</code> using the functions <code>valfn</code> and
<code>selfn</code>. For each ntuple row where the selection function
<code>selen</code> is non-zero the corresponding value of that row is
computed using the function value_func<code>valfn</code> and added to the
histogram <code>h</code>. Those ntuple rows where <code>selfn</code>
returns zero are ignored. New entries are added to the histogram, so
subsequent calls can be used to accumulate further data in the same
histogram.</p>
</li></ul>

<p><a href="hist2d_rdoc.html">prev</a> <a href="monte_rdoc.html">next</a></p>

<p><a href="ref_rdoc.html">Reference index</a> <a href="index.html">top</a></p>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://rdoc.rubyforge.org">RDoc</a> 4.1.2.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

